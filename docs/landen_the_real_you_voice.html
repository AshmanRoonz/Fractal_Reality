<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Real You</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Baloo+2:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sky: #e8f4fc;
            --sunshine: #ffd93d;
            --grass: #6bcb77;
            --ocean: #4d96ff;
            --berry: #9b6dff;
            --coral: #ff6b6b;
            --cloud: #ffffff;
            --night: #2d3436;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(180deg, var(--sky) 0%, #d4e9f7 100%);
            min-height: 100vh;
            color: var(--night);
            overflow: hidden;
        }

        .book-container {
            max-width: 650px;
            margin: 0 auto;
            padding: 1rem;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            text-align: center;
            padding: 1rem 1rem 0.5rem;
            flex-shrink: 0;
        }

        .stars {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        h1 {
            font-family: 'Baloo 2', cursive;
            font-size: clamp(2rem, 6vw, 2.8rem);
            font-weight: 700;
            color: var(--ocean);
            text-shadow: 2px 2px 0 var(--cloud);
            margin-bottom: 0.25rem;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--berry);
            font-weight: 600;
        }

        /* Page container */
        .pages-wrapper {
            flex: 1;
            position: relative;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        /* Page cards */
        .page {
            background: var(--cloud);
            border-radius: 24px;
            padding: 2rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: auto;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.5s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .page.active {
            opacity: 1;
            transform: translateX(0);
        }

        .page.exit-left {
            opacity: 0;
            transform: translateX(-100%);
        }

        .page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--coral), var(--sunshine), var(--grass), var(--ocean), var(--berry));
            border-radius: 24px 24px 0 0;
        }

        .page p {
            font-size: 1.25rem;
            line-height: 1.8;
            margin-bottom: 1.2rem;
            color: var(--night);
        }

        .page p:last-child {
            margin-bottom: 0;
        }

        /* Big feelings */
        .big-text {
            font-family: 'Baloo 2', cursive;
            font-size: 1.6rem;
            color: var(--ocean);
            text-align: center;
            padding: 1rem;
        }

        /* Character illustration */
        .character {
            width: 120px;
            height: 120px;
            margin: 1.5rem auto;
            position: relative;
        }

        .face {
            width: 100px;
            height: 100px;
            background: var(--sunshine);
            border-radius: 50%;
            position: absolute;
            top: 10px;
            left: 10px;
            box-shadow: inset -10px -10px 20px rgba(0,0,0,0.1);
        }

        .eye {
            width: 12px;
            height: 12px;
            background: var(--night);
            border-radius: 50%;
            position: absolute;
            top: 35px;
        }

        .eye.left { left: 28px; }
        .eye.right { right: 28px; }

        .smile {
            width: 30px;
            height: 15px;
            border: 4px solid var(--night);
            border-top: none;
            border-radius: 0 0 30px 30px;
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
        }

        .sparkle {
            position: absolute;
            font-size: 1.5rem;
        }

        .sparkle.s1 { top: 0; right: 0; }
        .sparkle.s2 { top: 20px; left: 0; }
        .sparkle.s3 { bottom: 0; right: 20px; }

        /* Thought bubbles */
        .thought {
            background: #f8f4ff;
            border: 3px dashed var(--berry);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: var(--berry);
        }

        /* The secret */
        .secret-box {
            background: linear-gradient(135deg, #fff9e6 0%, #fff4d4 100%);
            border: 3px solid var(--sunshine);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .secret-box .label {
            font-family: 'Baloo 2', cursive;
            font-size: 1rem;
            color: var(--coral);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .secret-box p {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--night);
            margin: 0;
        }

        /* Magic words */
        .magic-words {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border: 3px solid var(--grass);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .magic-words .label {
            font-family: 'Baloo 2', cursive;
            font-size: 1.1rem;
            color: var(--grass);
            text-align: center;
            margin-bottom: 1rem;
        }

        .magic-words p {
            font-size: 1.3rem;
            text-align: center;
            font-weight: 600;
            color: var(--night);
            margin: 0;
        }

        /* Promise box */
        .promise-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border: 3px solid var(--ocean);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .promise-box .label {
            font-family: 'Baloo 2', cursive;
            font-size: 1.1rem;
            color: var(--ocean);
            text-align: center;
            margin-bottom: 1rem;
        }

        .promise-box p {
            font-size: 1.2rem;
            text-align: center;
            color: var(--night);
        }

        /* Emoji decorations */
        .emoji-row {
            text-align: center;
            font-size: 2rem;
            padding: 1rem 0;
            letter-spacing: 0.5rem;
        }

        /* Final message */
        .finale {
            text-align: center;
            padding: 1rem;
        }

        .finale .big {
            font-family: 'Baloo 2', cursive;
            font-size: 1.8rem;
            color: var(--ocean);
            margin-bottom: 1rem;
        }

        .finale p {
            font-size: 1.2rem;
            color: var(--night);
        }

        .heart {
            color: var(--coral);
            font-size: 3rem;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Controls */
        .controls {
            flex-shrink: 0;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .nav-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
        }

        .nav-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn.prev {
            background: var(--berry);
            color: white;
        }

        .nav-btn.next {
            background: var(--ocean);
            color: white;
        }

        .nav-btn:hover:not(:disabled) {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .page-indicator {
            font-family: 'Baloo 2', cursive;
            font-size: 1.2rem;
            color: var(--night);
            min-width: 80px;
            text-align: center;
        }

        /* Voice controls */
        .voice-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
        }

        .voice-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 30px;
            border: none;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .voice-btn.play-pause {
            background: var(--grass);
            color: white;
        }

        .voice-btn.play-pause.playing {
            background: var(--coral);
        }

        .voice-btn.auto-toggle {
            background: var(--sunshine);
            color: var(--night);
        }

        .voice-btn.auto-toggle.active {
            background: var(--grass);
            color: white;
        }

        .voice-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        /* Progress dots */
        .progress-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 0.5rem 0;
            flex-wrap: wrap;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .dot.active {
            background: var(--ocean);
            transform: scale(1.3);
        }

        .dot:hover {
            background: var(--berry);
        }

        /* Speaking indicator */
        .speaking-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--grass);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: none;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .speaking-indicator.visible {
            display: flex;
        }

        .speaking-indicator .wave {
            display: flex;
            gap: 3px;
        }

        .speaking-indicator .wave span {
            width: 4px;
            height: 16px;
            background: white;
            border-radius: 2px;
            animation: wave 0.8s ease-in-out infinite;
        }

        .speaking-indicator .wave span:nth-child(2) {
            animation-delay: 0.1s;
        }

        .speaking-indicator .wave span:nth-child(3) {
            animation-delay: 0.2s;
        }

        @keyframes wave {
            0%, 100% { height: 8px; }
            50% { height: 16px; }
        }

        /* Responsive */
        @media (max-width: 500px) {
            .book-container {
                padding: 0.5rem;
            }

            .page {
                padding: 1.5rem;
            }

            .page p {
                font-size: 1.1rem;
            }

            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            h1 {
                font-size: 2rem;
            }
        }

        /* Voice selector */
        .voice-selector {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .voice-selector select {
            padding: 0.4rem 0.8rem;
            border-radius: 15px;
            border: 2px solid var(--ocean);
            font-family: 'Nunito', sans-serif;
            font-size: 0.9rem;
            background: white;
            color: var(--night);
            cursor: pointer;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .speed-control input {
            width: 80px;
        }
    </style>
</head>
<body>

<div class="speaking-indicator" id="speakingIndicator">
    <div class="wave">
        <span></span>
        <span></span>
        <span></span>
    </div>
    Reading...
</div>

<div class="book-container">

    <header>
        <div class="stars">‚ú® ‚≠ê ‚ú®</div>
        <h1>The Real You</h1>
        <p class="subtitle">A note about something important</p>
    </header>

    <div class="pages-wrapper" id="pagesWrapper">
        <!-- Page 1 -->
        <div class="page active" data-page="1">
            <p>Hey buddy.</p>
            <p>I want to talk to you about something. Not because you're in trouble. You're not in trouble at all.</p>
            <p>I just figured something out, and I think it might help.</p>
        </div>

        <!-- Page 2 -->
        <div class="page" data-page="2">
            <p>Sometimes you tell me stories about things that didn't quite happen the way you say.</p>
            <p>And I've been wondering... <em>why?</em></p>
            <p>Not "why" like I'm mad. "Why" like I'm curious. Like I want to understand.</p>
            <div class="character">
                <div class="face">
                    <div class="eye left"></div>
                    <div class="eye right"></div>
                    <div class="smile"></div>
                </div>
                <span class="sparkle s1">‚ú®</span>
                <span class="sparkle s2">‚≠ê</span>
                <span class="sparkle s3">‚ú®</span>
            </div>
        </div>

        <!-- Page 3 -->
        <div class="page" data-page="3">
            <p>I think I figured it out.</p>
            <div class="thought">
                <p>Maybe... you want me to think you're amazing.</p>
                <p>Maybe you want me to be excited about you.</p>
                <p>Maybe you want me to really <em>see</em> you.</p>
            </div>
            <p>And you know what?</p>
            <p class="big-text">That makes total sense.</p>
            <p>Everyone wants to feel special. Everyone wants to be noticed. That's not weird or bad. That's just being a person.</p>
        </div>

        <!-- Page 4 -->
        <div class="page" data-page="4">
            <p>But here's the thing I really need you to know:</p>
            <div class="secret-box">
                <div class="label">üåü The Secret üåü</div>
                <p>I already think you're amazing.</p>
            </div>
            <p>Not because of any story you could tell me.</p>
            <p>Not because of anything you could make up.</p>
            <p>Just because you're <em>you</em>.</p>
        </div>

        <!-- Page 5 -->
        <div class="page" data-page="5">
            <p>Regular you. Normal you. The you who leaves socks everywhere and asks weird questions and laughs at silly stuff.</p>
            <p>THAT guy is who I want to hang out with.</p>
            <p>THAT guy is who I love.</p>
            <div class="emoji-row">üß¶ üòÑ üß¶</div>
            <p>You don't have to add anything extra. You don't have to make anything up. The real you is already enough.</p>
        </div>

        <!-- Page 6 -->
        <div class="page" data-page="6">
            <p>Here's the tricky part though:</p>
            <p>When you make up stories to get my attention, it actually makes it <em>harder</em> for me to see the real you.</p>
            <p>It's like... you're putting a costume over yourself. And I'm looking at the costume instead of looking at <em>you</em>.</p>
            <p>But the real you is who I actually want to see!</p>
        </div>

        <!-- Page 7 -->
        <div class="page" data-page="7">
            <p>So here's an idea.</p>
            <p>Next time you feel like you need to make something up to get my attention...</p>
            <div class="magic-words">
                <div class="label">ü™Ñ Try These Magic Words Instead ü™Ñ</div>
                <p>"Dad, I want you to notice me."</p>
            </div>
            <p>Or:</p>
            <p style="text-align: center; font-size: 1.2rem; color: var(--berry);">"Hey Dad, can you look at me for a sec?"</p>
            <p>Or even just:</p>
            <p style="text-align: center; font-size: 1.2rem; color: var(--grass);">"Dad. DAD. Daaaaaaad!"</p>
            <p>That works too. üòÑ</p>
        </div>

        <!-- Page 8 -->
        <div class="page" data-page="8">
            <div class="promise-box">
                <div class="label">üíô My Promise üíô</div>
                <p>If you ask me to see you, I will look.</p>
                <p>For real. Every time.</p>
                <p>You don't have to earn it. You just have to ask.</p>
            </div>
        </div>

        <!-- Page 9 -->
        <div class="page" data-page="9">
            <p>The real you ‚Äî the actual Landen ‚Äî is someone I love spending time with.</p>
            <p>You don't need a better story.</p>
            <p>You don't need to be more impressive.</p>
            <p>You just need to be you.</p>
            <p class="big-text">And you're already doing that perfectly.</p>
        </div>

        <!-- Page 10 -->
        <div class="page" data-page="10">
            <div class="finale">
                <p class="big">You are the real thing.</p>
                <p>And the real thing is exactly what I want.</p>
                <div class="heart">‚ù§Ô∏è</div>
                <p style="margin-top: 1rem; color: var(--berry);">Love, Dad</p>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="progress-dots" id="progressDots"></div>
        
        <div class="nav-controls">
            <button class="nav-btn prev" id="prevBtn" disabled>‚óÄ</button>
            <span class="page-indicator" id="pageIndicator">1 / 10</span>
            <button class="nav-btn next" id="nextBtn">‚ñ∂</button>
        </div>

        <div class="voice-controls">
            <button class="voice-btn play-pause" id="playPauseBtn">
                <span id="playPauseIcon">üîä</span>
                <span id="playPauseText">Read Page</span>
            </button>
            <button class="voice-btn auto-toggle active" id="autoToggleBtn">
                ‚ú® Auto-Read: ON
            </button>
        </div>

        <div class="voice-selector">
            <label>Voice:</label>
            <select id="voiceSelect"></select>
            <div class="speed-control">
                <label>Speed:</label>
                <input type="range" id="speedRange" min="0.5" max="1.5" step="0.1" value="0.9">
            </div>
        </div>
    </div>

</div>

<script>
    // Page content for speech (cleaned text without HTML)
    const pageTexts = [
        "Hey buddy. I want to talk to you about something. Not because you're in trouble. You're not in trouble at all. I just figured something out, and I think it might help.",
        
        "Sometimes you tell me stories about things that didn't quite happen the way you say. And I've been wondering... why? Not why like I'm mad. Why like I'm curious. Like I want to understand.",
        
        "I think I figured it out. Maybe... you want me to think you're amazing. Maybe you want me to be excited about you. Maybe you want me to really see you. And you know what? That makes total sense. Everyone wants to feel special. Everyone wants to be noticed. That's not weird or bad. That's just being a person.",
        
        "But here's the thing I really need you to know: The Secret is... I already think you're amazing. Not because of any story you could tell me. Not because of anything you could make up. Just because you're you.",
        
        "Regular you. Normal you. The you who leaves socks everywhere and asks weird questions and laughs at silly stuff. THAT guy is who I want to hang out with. THAT guy is who I love. You don't have to add anything extra. You don't have to make anything up. The real you is already enough.",
        
        "Here's the tricky part though: When you make up stories to get my attention, it actually makes it harder for me to see the real you. It's like... you're putting a costume over yourself. And I'm looking at the costume instead of looking at you. But the real you is who I actually want to see!",
        
        "So here's an idea. Next time you feel like you need to make something up to get my attention... Try These Magic Words Instead: Dad, I want you to notice me. Or: Hey Dad, can you look at me for a sec? Or even just: Dad. DAD. Daaaaaaad! That works too.",
        
        "My Promise: If you ask me to see you, I will look. For real. Every time. You don't have to earn it. You just have to ask.",
        
        "The real you ‚Äî the actual Landen ‚Äî is someone I love spending time with. You don't need a better story. You don't need to be more impressive. You just need to be you. And you're already doing that perfectly.",
        
        "You are the real thing. And the real thing is exactly what I want. Love, Dad"
    ];

    // State
    let currentPage = 1;
    const totalPages = 10;
    let isSpeaking = false;
    let autoRead = true;
    let selectedVoice = null;
    let speechRate = 0.9;

    // Elements
    const pages = document.querySelectorAll('.page');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const pageIndicator = document.getElementById('pageIndicator');
    const progressDots = document.getElementById('progressDots');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playPauseIcon = document.getElementById('playPauseIcon');
    const playPauseText = document.getElementById('playPauseText');
    const autoToggleBtn = document.getElementById('autoToggleBtn');
    const speakingIndicator = document.getElementById('speakingIndicator');
    const voiceSelect = document.getElementById('voiceSelect');
    const speedRange = document.getElementById('speedRange');

    // Initialize progress dots
    function initDots() {
        for (let i = 1; i <= totalPages; i++) {
            const dot = document.createElement('div');
            dot.className = 'dot' + (i === 1 ? ' active' : '');
            dot.dataset.page = i;
            dot.addEventListener('click', () => goToPage(i));
            progressDots.appendChild(dot);
        }
    }

    // Update UI
    function updateUI() {
        // Update page indicator
        pageIndicator.textContent = `${currentPage} / ${totalPages}`;
        
        // Update buttons
        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = currentPage === totalPages;
        
        // Update dots
        document.querySelectorAll('.dot').forEach((dot, index) => {
            dot.classList.toggle('active', index + 1 === currentPage);
        });
        
        // Update pages
        pages.forEach((page, index) => {
            const pageNum = index + 1;
            page.classList.remove('active', 'exit-left');
            
            if (pageNum === currentPage) {
                page.classList.add('active');
            } else if (pageNum < currentPage) {
                page.classList.add('exit-left');
            }
        });
    }

    // Speech synthesis
    function loadVoices() {
        const voices = speechSynthesis.getVoices();
        voiceSelect.innerHTML = '';
        
        // Prefer English voices, especially friendly/natural ones
        const englishVoices = voices.filter(v => v.lang.startsWith('en'));
        const voicesToShow = englishVoices.length > 0 ? englishVoices : voices;
        
        voicesToShow.forEach((voice, index) => {
            const option = document.createElement('option');
            option.value = index;
            option.textContent = `${voice.name} (${voice.lang})`;
            voiceSelect.appendChild(option);
        });
        
        // Try to select a good default voice
        const preferredVoices = ['Samantha', 'Karen', 'Daniel', 'Google', 'Microsoft'];
        let found = false;
        
        for (const preferred of preferredVoices) {
            const index = voicesToShow.findIndex(v => v.name.includes(preferred));
            if (index !== -1) {
                voiceSelect.value = index;
                selectedVoice = voicesToShow[index];
                found = true;
                break;
            }
        }
        
        if (!found && voicesToShow.length > 0) {
            selectedVoice = voicesToShow[0];
        }
    }

    function speak(text) {
        // Cancel any ongoing speech
        speechSynthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(text);
        
        // Set voice
        const voices = speechSynthesis.getVoices();
        const englishVoices = voices.filter(v => v.lang.startsWith('en'));
        const voicesToUse = englishVoices.length > 0 ? englishVoices : voices;
        
        if (voiceSelect.value && voicesToUse[voiceSelect.value]) {
            utterance.voice = voicesToUse[voiceSelect.value];
        } else if (selectedVoice) {
            utterance.voice = selectedVoice;
        }
        
        utterance.rate = speechRate;
        utterance.pitch = 1.0;
        
        utterance.onstart = () => {
            isSpeaking = true;
            updatePlayPauseButton();
            speakingIndicator.classList.add('visible');
        };
        
        utterance.onend = () => {
            isSpeaking = false;
            updatePlayPauseButton();
            speakingIndicator.classList.remove('visible');
        };
        
        utterance.onerror = () => {
            isSpeaking = false;
            updatePlayPauseButton();
            speakingIndicator.classList.remove('visible');
        };
        
        speechSynthesis.speak(utterance);
    }

    function stopSpeaking() {
        speechSynthesis.cancel();
        isSpeaking = false;
        updatePlayPauseButton();
        speakingIndicator.classList.remove('visible');
    }

    function updatePlayPauseButton() {
        if (isSpeaking) {
            playPauseIcon.textContent = '‚èπ';
            playPauseText.textContent = 'Stop';
            playPauseBtn.classList.add('playing');
        } else {
            playPauseIcon.textContent = 'üîä';
            playPauseText.textContent = 'Read Page';
            playPauseBtn.classList.remove('playing');
        }
    }

    // Navigation
    function goToPage(pageNum) {
        if (pageNum < 1 || pageNum > totalPages) return;
        
        stopSpeaking();
        currentPage = pageNum;
        updateUI();
        
        // Auto-read after a short delay for page transition
        if (autoRead) {
            setTimeout(() => {
                speak(pageTexts[currentPage - 1]);
            }, 600);
        }
    }

    function nextPage() {
        goToPage(currentPage + 1);
    }

    function prevPage() {
        goToPage(currentPage - 1);
    }

    // Event listeners
    prevBtn.addEventListener('click', prevPage);
    nextBtn.addEventListener('click', nextPage);

    playPauseBtn.addEventListener('click', () => {
        if (isSpeaking) {
            stopSpeaking();
        } else {
            speak(pageTexts[currentPage - 1]);
        }
    });

    autoToggleBtn.addEventListener('click', () => {
        autoRead = !autoRead;
        autoToggleBtn.classList.toggle('active', autoRead);
        autoToggleBtn.innerHTML = autoRead ? '‚ú® Auto-Read: ON' : 'üîá Auto-Read: OFF';
    });

    voiceSelect.addEventListener('change', () => {
        const voices = speechSynthesis.getVoices();
        const englishVoices = voices.filter(v => v.lang.startsWith('en'));
        const voicesToUse = englishVoices.length > 0 ? englishVoices : voices;
        selectedVoice = voicesToUse[voiceSelect.value];
    });

    speedRange.addEventListener('input', (e) => {
        speechRate = parseFloat(e.target.value);
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === ' ') {
            e.preventDefault();
            nextPage();
        } else if (e.key === 'ArrowLeft') {
            e.preventDefault();
            prevPage();
        } else if (e.key === 'Escape') {
            stopSpeaking();
        }
    });

    // Touch swipe support
    let touchStartX = 0;
    let touchEndX = 0;

    document.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
    });

    document.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    });

    function handleSwipe() {
        const swipeThreshold = 50;
        const diff = touchStartX - touchEndX;
        
        if (Math.abs(diff) > swipeThreshold) {
            if (diff > 0) {
                nextPage();
            } else {
                prevPage();
            }
        }
    }

    // Initialize
    function init() {
        initDots();
        updateUI();
        
        // Load voices (may need to wait for them to load)
        if (speechSynthesis.getVoices().length > 0) {
            loadVoices();
        }
        speechSynthesis.onvoiceschanged = loadVoices;
        
        // Start reading first page after a delay (if auto-read is on)
        if (autoRead) {
            setTimeout(() => {
                speak(pageTexts[0]);
            }, 1500);
        }
    }

    init();
</script>

</body>
</html>
