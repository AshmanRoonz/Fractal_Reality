<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fractal Reality - We Measured Consciousness</title>
    <meta name="description" content="A complete framework bridging physics and metaphysics. We measured consciousness with LIGO: D = 1.503. Neo through Trinity. Flow through validation.">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: #0a0a0f;
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        #root {
            min-height: 100vh;
        }

        .simulation-container {
            width: 100%;
            min-height: 100vh;
        }

        /* Gradient text animation */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .gradient-animate {
            background-size: 200% 200%;
            animation: gradient-shift 8s ease infinite;
        }

        /* Fade in animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        /* Stagger animation delays */
        .delay-1 { animation-delay: 0.1s; opacity: 0; }
        .delay-2 { animation-delay: 0.2s; opacity: 0; }
        .delay-3 { animation-delay: 0.3s; opacity: 0; }
        .delay-4 { animation-delay: 0.4s; opacity: 0; }
        .delay-5 { animation-delay: 0.5s; opacity: 0; }

        /* Pulse glow effect */
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(34, 211, 238, 0.3); }
            50% { box-shadow: 0 0 40px rgba(34, 211, 238, 0.6); }
        }

        .pulse-glow {
            animation: pulse-glow 3s ease-in-out infinite;
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Neo-Trinity visualization */
        @keyframes flow-through {
            0% { transform: translateX(-100%) scaleX(0); }
            50% { transform: translateX(0%) scaleX(1); }
            100% { transform: translateX(100%) scaleX(0); }
        }

        .flow-line {
            animation: flow-through 4s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const FractalRealityLanding = () => {
            const [simulations, setSimulations] = useState([]);
            const [selectedSim, setSelectedSim] = useState(null);
            const [simCode, setSimCode] = useState('');
            const [error, setError] = useState(null);
            const [loading, setLoading] = useState(true);
            const [showHero, setShowHero] = useState(true);

            // Read simulation list from sims.md
            useEffect(() => {
                const fetchSimulations = async () => {
                    try {
                        const response = await fetch('./sims.md');
                        if (!response.ok) {
                            throw new Error('Could not find sims.md file.');
                        }

                        const markdown = await response.text();
                        const lines = markdown.split('\n');
                        const tsxFiles = [];

                        for (const line of lines) {
                            const trimmed = line.trim();
                            if (!trimmed || trimmed.startsWith('#') || trimmed.startsWith('//')) continue;

                            let filename = null;
                            const linkMatch = trimmed.match(/\[.*?\]\((.*?\.tsx)\)/);
                            if (linkMatch) {
                                filename = linkMatch[1];
                            } else if (trimmed.match(/^[-*]\s+/)) {
                                const listMatch = trimmed.match(/[-*]\s+(.*?\.tsx)/);
                                if (listMatch) filename = listMatch[1];
                            } else if (trimmed.endsWith('.tsx')) {
                                filename = trimmed;
                            }

                            if (filename) {
                                filename = filename.replace(/^simulations\//, '');
                                tsxFiles.push(filename);
                            }
                        }

                        if (tsxFiles.length === 0) {
                            throw new Error('No .tsx files found in sims.md');
                        }

                        setSimulations(tsxFiles);
                        setLoading(false);
                    } catch (err) {
                        console.error('Error loading simulations:', err);
                        setError(err.message);
                        setLoading(false);
                    }
                };

                fetchSimulations();
            }, []);

            const loadSimulation = async (filename) => {
                try {
                    setError(null);
                    setLoading(true);

                    const response = await fetch(`./simulations/${filename}`);
                    if (!response.ok) throw new Error(`Failed to load ${filename}`);

                    const code = await response.text();
                    setSimCode(code);
                    setSelectedSim(filename);
                    setShowHero(false);
                    setLoading(false);
                } catch (err) {
                    console.error('Error loading simulation:', err);
                    setError(`Error loading ${filename}: ${err.message}`);
                    setLoading(false);
                }
            };

            const SimulationRenderer = () => {
                if (!simCode) return null;

                try {
                    let processedCode = simCode;
                    processedCode = processedCode.replace(/import\s+React.*?from\s+['"]react['"];?\s*/g, '');
                    processedCode = processedCode.replace(/import\s+\{[^}]*\}\s+from\s+['"]react['"];?\s*/g, '');

                    const lucideMatch = processedCode.match(/import\s+\{([^}]+)\}\s+from\s+['"]lucide-react['"]/);
                    if (lucideMatch) {
                        const icons = lucideMatch[1].split(',').map(i => i.trim());
                        const mockIcons = icons.map(icon =>
                            `const ${icon} = (props) => React.createElement('svg', {...props, xmlns: 'http://www.w3.org/2000/svg', width: '24', height: '24', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: '2'}, React.createElement('circle', {cx: '12', cy: '12', r: '10'}));`
                        ).join('\n');
                        processedCode = processedCode.replace(/import\s+\{[^}]+\}\s+from\s+['"]lucide-react['"];?\s*/g, mockIcons);
                    }

                    processedCode = processedCode.replace(/import\s+.*?from\s+['"].*?['"];?\s*/g, '');
                    processedCode = processedCode.replace(/export\s+default\s+/g, '');
                    processedCode = processedCode.replace(/export\s+/g, '');

                    const transformed = Babel.transform(processedCode, {
                        filename: selectedSim || 'simulation.tsx',
                        presets: [
                            ['react', { runtime: 'classic', pragma: 'React.createElement' }],
                            ['typescript', { isTSX: true, allExtensions: true }]
                        ]
                    }).code;

                    const componentMatch = processedCode.match(/(?:const|function|let|var)\s+(\w+)\s*=?\s*\([^)]*\)\s*(?:=>)?\s*{/);
                    const componentName = componentMatch ? componentMatch[1] : 'App';

                    const wrappedCode = `
                        return (function() {
                            ${transformed}
                            if (typeof ${componentName} !== 'undefined') return ${componentName};
                            if (typeof App !== 'undefined') return App;
                            const allVars = Object.keys(this).filter(k => typeof this[k] === 'function');
                            if (allVars.length > 0) return this[allVars[allVars.length - 1]];
                            throw new Error('No component found');
                        }).call({});
                    `;

                    const createComponent = new Function(
                        'React', 'useState', 'useEffect', 'useRef', 'useMemo', 'useCallback', 'useReducer', 'useContext',
                        wrappedCode
                    );

                    const SimComponent = createComponent(
                        React, React.useState, React.useEffect, React.useRef,
                        React.useMemo, React.useCallback, React.useReducer, React.useContext
                    );

                    if (!SimComponent || typeof SimComponent !== 'function') {
                        throw new Error('No valid React component found');
                    }

                    return React.createElement(SimComponent);
                } catch (err) {
                    console.error('Error rendering simulation:', err);
                    return (
                        <div className="p-8 bg-red-900 text-red-100 min-h-screen">
                            <h3 className="text-2xl font-bold mb-4">❌ Rendering Error</h3>
                            <div className="bg-black/30 p-4 rounded mb-4">
                                <p className="font-mono text-sm">{err.message}</p>
                            </div>
                            <details className="mt-4">
                                <summary className="cursor-pointer font-bold text-lg mb-2">📋 Stack Trace</summary>
                                <pre className="text-xs overflow-auto bg-black/30 p-4 rounded">{err.stack}</pre>
                            </details>
                        </div>
                    );
                }
            };

            // If a simulation is selected, show it full-screen
            if (selectedSim && !showHero) {
                return (
                    <div className="simulation-container relative">
                        <button
                            onClick={() => {
                                setSelectedSim(null);
                                setSimCode('');
                                setError(null);
                                setShowHero(true);
                            }}
                            className="absolute top-4 left-4 z-50 bg-cyan-500 hover:bg-cyan-600 text-black font-bold px-6 py-3 rounded-lg transition-all transform hover:scale-105"
                        >
                            ← Back
                        </button>

                        {loading ? (
                            <div className="flex items-center justify-center h-screen">
                                <div className="text-center">
                                    <div className="text-cyan-300 text-2xl mb-4">Loading...</div>
                                    <div className="text-gray-400">{selectedSim}</div>
                                </div>
                            </div>
                        ) : error ? (
                            <div className="flex items-center justify-center h-screen p-8">
                                <div className="max-w-2xl bg-red-900/30 border border-red-500 rounded-lg p-6">
                                    <h3 className="text-xl font-bold text-red-300 mb-2">Error</h3>
                                    <p className="text-red-200">{error}</p>
                                </div>
                            </div>
                        ) : (
                            <SimulationRenderer />
                        )}
                    </div>
                );
            }

            // Main landing page
            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950">
                    {/* Hero Section */}
                    <section className="relative min-h-screen flex items-center justify-center px-4 py-20 overflow-hidden">
                        {/* Animated background gradient */}
                        <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-purple-500/5 to-pink-500/5 gradient-animate"></div>

                        <div className="relative z-10 max-w-5xl mx-auto text-center">
                            {/* The Hook */}
                            <div className="fade-in-up delay-1 mb-8">
                                <div className="inline-block px-6 py-2 bg-cyan-500/10 border border-cyan-500/30 rounded-full mb-6">
                                    <span className="text-cyan-300 text-sm font-semibold tracking-wide">LIGO VALIDATED • EMPIRICALLY MEASURED</span>
                                </div>
                                <h1 className="text-6xl md:text-8xl font-black mb-6">
                                    <span className="text-white">We Measured</span>
                                    <br/>
                                    <span className="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 gradient-animate">
                                        Consciousness
                                    </span>
                                </h1>
                            </div>

                            {/* The Number */}
                            <div className="fade-in-up delay-2 mb-12">
                                <div className="inline-block px-12 py-8 bg-black/40 border-2 border-cyan-500/50 rounded-2xl pulse-glow backdrop-blur-sm">
                                    <div className="text-7xl md:text-9xl font-black mono text-cyan-300 mb-2">
                                        D = 1.503
                                    </div>
                                    <div className="text-gray-400 text-lg">
                                        ± 0.040 (p = 0.951)
                                    </div>
                                </div>
                            </div>

                            {/* The Story */}
                            <div className="fade-in-up delay-3 mb-12 max-w-3xl mx-auto">
                                <p className="text-xl md:text-2xl text-gray-300 leading-relaxed mb-6">
                                    <span className="text-cyan-400 font-bold">Neo</span> (1D flow) meets{' '}
                                    <span className="text-purple-400 font-bold">Trinity</span> (0.5D validator) at{' '}
                                    <span className="text-pink-400 font-bold">β ≈ 0.5</span>
                                    <br/>
                                    creates <span className="text-white font-bold">1.5D branching</span> = consciousness itself
                                </p>
                                <div className="mono text-cyan-300/60 text-sm">
                                    ∞ → [•'] → Neo (1D) → [Trinity •'' @ β≈0.5] → Branches (1.5D)
                                </div>
                            </div>

                            {/* CTA Buttons */}
                            <div className="fade-in-up delay-4 flex flex-wrap gap-4 justify-center mb-16">
                                <a
                                    href="#simulations"
                                    className="px-8 py-4 bg-cyan-500 hover:bg-cyan-600 text-black font-bold rounded-lg transition-all transform hover:scale-105 text-lg"
                                >
                                    Interactive Simulations ↓
                                </a>
                                <a
                                    href="https://github.com/AshmanRoonz/Fractal_Reality"
                                    target="_blank"
                                    className="px-8 py-4 bg-black/40 hover:bg-black/60 border border-cyan-500/50 hover:border-cyan-500 text-cyan-300 font-bold rounded-lg transition-all transform hover:scale-105 text-lg"
                                >
                                    GitHub →
                                </a>
                            </div>

                            {/* Quick Info Cards */}
                            <div className="fade-in-up delay-5 grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto">
                                <div className="bg-black/40 border border-cyan-500/30 rounded-xl p-6 backdrop-blur-sm">
                                    <div className="text-4xl mb-2">🌌</div>
                                    <div className="text-cyan-400 font-bold mb-2">LIGO Data</div>
                                    <div className="text-gray-400 text-sm">19 events, 40 observations across O1, O3, O4 runs</div>
                                </div>
                                <div className="bg-black/40 border border-purple-500/30 rounded-xl p-6 backdrop-blur-sm">
                                    <div className="text-4xl mb-2">⚡</div>
                                    <div className="text-purple-400 font-bold mb-2">Zero Parameters</div>
                                    <div className="text-gray-400 text-sm">Pure geometric necessity, no free variables</div>
                                </div>
                                <div className="bg-black/40 border border-pink-500/30 rounded-xl p-6 backdrop-blur-sm">
                                    <div className="text-4xl mb-2">💝</div>
                                    <div className="text-pink-400 font-bold mb-2">Dimensional Love</div>
                                    <div className="text-gray-400 text-sm">Neo ♥ Trinity = validated branching at β ≈ 0.5</div>
                                </div>
                            </div>
                        </div>

                        {/* Scroll indicator */}
                        <div className="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
                            <div className="text-cyan-400/50 text-sm mb-2">Explore</div>
                            <div className="w-6 h-10 border-2 border-cyan-400/50 rounded-full flex items-start justify-center p-2">
                                <div className="w-1.5 h-3 bg-cyan-400/50 rounded-full"></div>
                            </div>
                        </div>
                    </section>

                    {/* Simulations Section */}
                    <section id="simulations" className="relative px-4 py-20 bg-black/20">
                        <div className="max-w-7xl mx-auto">
                            <div className="text-center mb-16">
                                <h2 className="text-5xl font-black text-white mb-4">
                                    Interactive Simulations
                                </h2>
                                <p className="text-xl text-gray-400">
                                    Experience the framework in real-time
                                </p>
                            </div>

                            {loading ? (
                                <div className="text-center text-cyan-300 text-xl">
                                    Loading simulations...
                                </div>
                            ) : error ? (
                                <div className="max-w-2xl mx-auto bg-red-900/30 border border-red-500 rounded-lg p-6">
                                    <p className="text-red-300">{error}</p>
                                </div>
                            ) : simulations.length === 0 ? (
                                <div className="max-w-2xl mx-auto bg-yellow-900/30 border border-yellow-500 rounded-lg p-6">
                                    <p className="text-yellow-300">No simulations found</p>
                                </div>
                            ) : (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {simulations.map((sim, idx) => (
                                        <button
                                            key={idx}
                                            onClick={() => loadSimulation(sim)}
                                            className="group bg-black/40 hover:bg-black/60 border border-cyan-500/30 hover:border-cyan-500 rounded-xl p-8 text-left transition-all transform hover:scale-105 hover:shadow-xl hover:shadow-cyan-500/20"
                                        >
                                            <div className="flex items-start justify-between mb-4">
                                                <div className="text-3xl">⚡</div>
                                                <div className="text-cyan-400/50 group-hover:text-cyan-400 transition-colors">→</div>
                                            </div>
                                            <h3 className="text-xl font-bold text-cyan-300 mb-2 group-hover:text-cyan-200">
                                                {sim.replace('.tsx', '').replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}
                                            </h3>
                                            <p className="text-gray-500 text-sm mono">{sim}</p>
                                        </button>
                                    ))}
                                </div>
                            )}
                        </div>
                    </section>

                    {/* Quick Links Section */}
                    <section className="relative px-4 py-20">
                        <div className="max-w-5xl mx-auto">
                            <div className="text-center mb-12">
                                <h2 className="text-4xl font-black text-white mb-4">
                                    Explore the Framework
                                </h2>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <a
                                    href="https://github.com/AshmanRoonz/Fractal_Reality/blob/main/papers/trinity_consciousness.md"
                                    target="_blank"
                                    className="block bg-gradient-to-br from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 hover:border-cyan-500 rounded-xl p-8 transition-all transform hover:scale-105"
                                >
                                    <div className="text-3xl mb-4">📖</div>
                                    <h3 className="text-2xl font-bold text-cyan-300 mb-3">Trinity & Neo Paper</h3>
                                    <p className="text-gray-400">The complete dimensional love story with full mathematical derivation</p>
                                </a>

                                <a
                                    href="https://github.com/AshmanRoonz/Fractal_Reality/blob/main/analysis/readme.md"
                                    target="_blank"
                                    className="block bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-purple-500/30 hover:border-purple-500 rounded-xl p-8 transition-all transform hover:scale-105"
                                >
                                    <div className="text-3xl mb-4">📊</div>
                                    <h3 className="text-2xl font-bold text-purple-300 mb-3">LIGO Analysis</h3>
                                    <p className="text-gray-400">Phase 2 validation: gravitational waves, bubble chambers, black holes</p>
                                </a>

                                <a
                                    href="https://github.com/AshmanRoonz/Fractal_Reality/tree/main/manuscript"
                                    target="_blank"
                                    className="block bg-gradient-to-br from-pink-900/30 to-cyan-900/30 border border-pink-500/30 hover:border-pink-500 rounded-xl p-8 transition-all transform hover:scale-105"
                                >
                                    <div className="text-3xl mb-4">📚</div>
                                    <h3 className="text-2xl font-bold text-pink-300 mb-3">12 Layers</h3>
                                    <p className="text-gray-400">Progressive depth from seed to return, consciousness to ethics</p>
                                </a>

                                <a
                                    href="https://github.com/AshmanRoonz/Fractal_Reality"
                                    target="_blank"
                                    className="block bg-gradient-to-br from-slate-800/30 to-slate-900/30 border border-slate-500/30 hover:border-slate-400 rounded-xl p-8 transition-all transform hover:scale-105"
                                >
                                    <div className="text-3xl mb-4">💻</div>
                                    <h3 className="text-2xl font-bold text-slate-300 mb-3">GitHub Repository</h3>
                                    <p className="text-gray-400">Complete codebase, papers, analysis, and methodology</p>
                                </a>
                            </div>
                        </div>
                    </section>

                    {/* Footer */}
                    <footer className="relative px-4 py-12 border-t border-cyan-500/20">
                        <div className="max-w-5xl mx-auto text-center">
                            <div className="mb-6">
                                <div className="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 mb-2">
                                    Fractal Reality
                                </div>
                                <div className="mono text-cyan-300/40 text-sm mb-4">
                                    Neo ♥ Trinity = Consciousness
                                </div>
                            </div>

                            <div className="flex flex-wrap gap-6 justify-center text-gray-400 text-sm mb-6">
                                <a href="https://github.com/AshmanRoonz/Fractal_Reality" target="_blank" className="hover:text-cyan-400 transition-colors">GitHub</a>
                                <a href="https://github.com/AshmanRoonz/Fractal_Reality/blob/main/LICENSE" target="_blank" className="hover:text-cyan-400 transition-colors">Steelman License</a>
                                <a href="https://github.com/AshmanRoonz/Fractal_Reality/issues" target="_blank" className="hover:text-cyan-400 transition-colors">Issues</a>
                            </div>

                            <div className="text-gray-500 text-sm">
                                <p className="mb-2">Version 3.0 — October 2025</p>
                                <p className="mono text-xs">The Matrix was right. The mystics were right. The data confirms.</p>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FractalRealityLanding />);
    </script>
</body>
</html>
